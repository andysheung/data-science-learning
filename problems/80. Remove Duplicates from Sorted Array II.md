```python
from collections import defaultdict

class Solution:

def removeDuplicates(self, nums: List[int]) -> int:

check_dict=defaultdict(int)

k = 0 #counter for first k elements appears at most twice in nums

j = len(nums)-1 # 5

i = 0

while i <= j: # len=6, [0,1,2,3,4,5]

if check_dict[nums[i]] == 2:

nums.pop(i)

nums.append(0)

j-=1

else:

check_dict[nums[i]]+=1

k+=1

i+=1

return k
```